// calldataDecode.ts

// @ts-ignore
const { guessAbiEncodedData, guessFragment } = require("@openchainxyz/abi-guesser/dist");
import { ParamType, FunctionFragment } from "ethers";

const calldata = "0xa270ef06000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000c00000000000000000000000000000000000000000000000000000000000000d0000000000000000000000000000000000000000000000000000000000000000020000000000000000000000000de0dd63d9fb65450339ef27577d4f39d095eb850000000000000000000000004f4e0f2cb72e718fc0433222768c57e823162152000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000000ba00000000000000000000000000000000000000000000000000000000000000b2431cea87a00000000000000000000000000000000000000000000021e19e0c9bab24000000000000000000000000000004f4e0f2cb72e718fc0433222768c57e82316215200000000000000000000000000000000000000000000000000000000000000600000000000000000000000000000000000000000000000000000000000000a84a270ef060000000000000000000000000000000000000000000000000000000000000060000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000008e0000000000000000000000000000000000000000000000000000000000000000c000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc20000000000000000000000003d9819210a31b4961b30ef54be2aed79b9c9cd3b0000000000000000000000004ddc2d193948926d02f9b1fe9e1daa0718270ed50000000000000000000000004ddc2d193948926d02f9b1fe9e1daa0718270ed5000000000000000000000000c11b1268c1a384e55c48c2391d8d480264a3a7f40000000000000000000000002260fac5e5542a773aa44fbcfedf7c193bc2c599000000000000000000000000b0200b0677dd825bb32b93d055ebb9dc3521db9d0000000000000000000000002260fac5e5542a773aa44fbcfedf7c193bc2c5990000000000000000000000004d2f5cfba55ae412221182d8475bc85799a5644b0000000000000000000000004f4e0f2cb72e718fc0433222768c57e823162152000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc2000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc2000000000000000000000000000000000000000000000000000000000000000c000000000000000000000000000000000000000000000000000000000000018000000000000000000000000000000000000000000000000000000000000001e000000000000000000000000000000000000000000000000000000000000002a000000000000000000000000000000000000000000000000000000000000002e0000000000000000000000000000000000000000000000000000000000000034000000000000000000000000000000000000000000000000000000000000003a0000000000000000000000000000000000000000000000000000000000000042000000000000000000000000000000000000000000000000000000000000004a0000000000000000000000000000000000000000000000000000000000000050000000000000000000000000000000000000000000000000000000000000005a00000000000000000000000000000000000000000000000000000000000000600000000000000000000000000000000000000000000000000000000000000064000000000000000000000000000000000000000000000000000000000000000242e1a7d4d00000000000000000000000000000000000000000000021e19e0c9bab2400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000084c299823800000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000002000000000000000000000000c11b1268c1a384e55c48c2391d8d480264a3a7f40000000000000000000000004ddc2d193948926d02f9b1fe9e1daa0718270ed50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000041249c58b0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000243af9e6690000000000000000000000004f4e0f2cb72e718fc0433222768c57e823162152000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000024c5ebeaec000000000000000000000000000000000000000000000000000000029b927000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000044095ea7b30000000000000000000000004d2f5cfba55ae412221182d8475bc85799a5644b000000000000000000000000000000000000000000000000000000029b9270000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000444e07008d000000000000000000000000148426fdc4c8a51b96b4bed827907b5fa6491ad0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002470a082310000000000000000000000004f4e0f2cb72e718fc0433222768c57e82316215200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006495e3c50b000000000000000000000000000000000000000000000000000000029b927000000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000ffffffff0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000247f5b002e0000000000000000000000004f4e0f2cb72e718fc0433222768c57e823162152000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000004d0e30db0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000044a9059cbb0000000000000000000000000de0dd63d9fb65450339ef27577d4f39d095eb8500000000000000000000000000000000000000000000021e19e0c9bab2d8968000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000012a27d53bc048700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000046791fc84e07d0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000021e19e0c9bab2d89680000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000044746a5053000000000000000000000000148426fdc4c8a51b96b4bed827907b5fa6491ad0000000000000000000000000000000000000000000000003860e639d8064000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000";

const paramTypes = guessAbiEncodedData(calldata);

if (!paramTypes) {
  console.log("Could not guess param types from calldata");
} else {
  console.log("Guessed ParamTypes:", paramTypes.map((p: ParamType) => p.format("full")));
}

const fragment = guessFragment(calldata);
if (!fragment) {
  console.log("Could not guess function fragment");
} else {
  console.log("Guessed Function:", fragment.format("full"));
}
